# Изометрическая игра "Город"

## Обзор

Это основа для изометрической игры, построенной с использованием Phaser 3 и Vue 3. Игра позволяет пользователю взаимодействовать с изометрической сеткой, состоящей из тайлов земли.

## Структура проекта

```
src/
├── game/
│   ├── CityGame.ts          # Основной класс игры
│   ├── scenes/
│   │   └── CityScene.ts    # Сцена города с изометрической сеткой
│   ├── utils/
│   │   └── IsometricUtils.ts # Утилиты для изометрической проекции
│   └── types/
│       └── CityTypes.ts     # Типы данных для игры
├── router/
│   └── index.ts           # Маршруты, включая /city
├── tiles/                # Ассеты тайлов (256x256 пикселей)
│   ├── Isometric Assets 1.png
│   ├── Isometric Assets 2.png
│   ├── Isometric Assets 3.png
│   └── Isometric Assets 4.png
└── views/
    └── CityView.vue       # Vue компонент для отображения игры
```

## Основные компоненты

### CityGame.ts
Главный класс игры, который инициализирует Phaser и управляет жизненным циклом игры.

### CityScene.ts
Сцена, которая:
- Загружает ассеты тайлов
- Создает изометрическую сетку 10x10
- Обрабатывает взаимодействие с пользователем
- Выделяет тайлы при клике

### IsometricUtils.ts
Утилиты для работы с изометрической проекцией:
- `gridToScreen()` - преобразование координат сетки в экранные
- `screenToGrid()` - преобразование экранных координат в координаты сетки
- `getDepth()` - определение глубины для правильного отображения
- `getDrawOrder()` - определение порядка отрисовки

### CityTypes.ts
Определения типов TypeScript для игры:
- `TileData` - информация о тайле
- `BuildingData` - информация о здании
- `BuildingType` - типы зданий
- `CityData` - данные города
- `GridPosition` - позиция в сетке

## Как это работает

1. **Инициализация**: При переходе на страницу `/city` создается экземпляр CityGame
2. **Загрузка**: CityScene загружает 4 ассета тайлов земли
3. **Отрисовка**: Создается изометрическая сетка 10x10, заполненная случайными тайлами земли
4. **Взаимодействие**: Пользователь может кликать на тайлы, которые выделяются желтым цветом

## Технические детали

- **Размер тайла**: 256x256 пикселей
- **Масштаб тайла**: 0.5 (фактический размер 128x128)
- **Размер сетки**: 10x10 тайлов
- **Изометрическая проекция**: Классическая с углом 45°

## Дальнейшее развитие

1. **Здания**: Добавление возможности строительства зданий на тайлах
2. **Ресурсы**: Система производства и сбора ресурсов
3. **Прогрессия**: Уровни города и разблокировки
4. **Сохранение**: Сохранение состояния города
5. **Анимации**: Анимации строительства и сбора ресурсов
6. **Интерфейс**: UI для управления городом

## Запуск

1. Установите зависимости: `npm install`
2. Запустите проект: `npm run dev`
3. Перейдите на страницу: `http://localhost:5173/MathTrainer/city`

## Примечания

- Игра использует Phaser 3 для рендеринга изометрической графики
- Vue 3 используется для управления состоянием и навигации
- TypeScript обеспечивает строгую типизацию
- Ассеты тайлов должны быть размером 256x256 пикселей