# PRD: Система достижений (Ачивок) для MathTrainer

## 1. Обзор

### 1.1 Цель проекта
Добавить систему достижений (ачивок) в приложение MathTrainer для повышения мотивации учеников и геймификации процесса обучения математике.

### 1.2 Описание продукта
MathTrainer - образовательное веб-приложение для тренировки математических навыков учеников 1-4 классов. Приложение включает 5 типов упражнений: счет, состав числа, разложение чисел, таблица умножения и уравнения.

## 2. Целевая аудитория

- **Основные пользователи**: ученики 1-4 классов (7-11 лет)
- **Вторичные пользователи**: родители и учителя, которые могут отслеживать прогресс

## 3. Пользовательские истории

### Как ученик, я хочу:
- Получать награды за свои успехи в математике
- Видеть, каких достижений мне не хватает для получения следующей ачивки
- Соревноваться с собой, улучшая свои результаты
- Делиться своими достижениями с родителями

### Как родитель, я хочу:
- Видеть прогресс своего ребенка через полученные достижения
- Мотивировать ребенка к регулярным занятиям

## 4. Категории ачивок

### 4.1 Ачивки за количество очков
**Общие:**
- "Новичок" - набрать 100 общих очков
- "Опытный математик" - набрать 500 очков
- "Мастер математики" - набрать 1000 очков
- "Легенда" - набрать 5000 очков

**По типам упражнений:**
- "Любитель счета" - 100 очков в счете
- "Эксперт по счету" - 500 очков в счете
- "Маг умножения" - 200 очков в умножении
- "Решатель уравнений" - 300 очков в уравнениях

### 4.2 Ачивки за правильность и streak
- "Первые шаги" - решить 10 примеров подряд без ошибок
- "На правильном пути" - 20 правильных ответов подряд
- "Идеальная серия" - 50 правильных ответов подряд
- "Неутомимый" - 100 правильных ответов подряд

### 4.3 Ачивки за освоение уровней
- "Таблица умножения 2" - освоить уровень 2 умножения
- "Таблица умножения 5" - освоить уровень 5 умножения
- "Мастер таблицы" - освоить все уровни умножения
- "Первая четверть" - завершить все упражнения для 1 четверти выбранного класса

### 4.4 Ачивки за время
- "Скоростной счет" - решить 20 примеров на сложение за 2 минуты
- "Быстрый умножатель" - решить 10 примеров на умножение за 1 минуту
- "Экспресс-уравнения" - решить 5 уравнений за 3 минуты

### 4.5 Ачивки за разнообразие
- "Универсальный математик" - получить хотя бы по 50 очков в каждом типе упражнений
- "Все по порядку" - пройти все упражнения в выбранном классе
- "Исследователь" - попробовать все типы упражнений хотя бы раз

### 4.6 Скрытые ачивки
- "Ночной математик" - решить 50 примеров после 20:00
- "Утренняя зарядка для ума" - начать день с 20 правильных ответов
- "Перфекционист" - решить 100 примеров с 100% правильностью

## 5. Требования к реализации

### 5.1 Структура данных
```typescript
interface Achievement {
  id: string
  name: string
  description: string
  category: 'points' | 'streak' | 'level' | 'time' | 'diversity' | 'hidden'
  icon: string
  condition: AchievementCondition
  reward: number // бонусные очки
  unlocked: boolean
  unlockedAt?: Date
  progress?: number // текущий прогресс (0-100)
}

interface AchievementCondition {
  type: string
  target: number
  exercise?: string // тип упражнения
  class?: number // класс
  timeLimit?: number // в секундах
}
```

### 5.2 Система хранения
- Хранить полученные ачивки в localStorage
- Синхронизация с текущей системой очков
- Отслеживание прогресса для нереализованных ачивок

### 5.3 UI компоненты
- Модальное окно с полученной ачивкой
- Страница/секция со всеми ачивками
- Индикатор прогресса для каждой ачивки
- Анимированные иконки и уведомления
- Счетчик полученных ачивок

### 5.4 Интеграция с текущей системой
- Проверка условий после каждого выполненного упражнения
- Использование данных из ScoresStore
- Совместимость с существующей системой классов и четвертей

## 6. Пользовательский интерфейс

### 6.1 Момент получения ачивки
- Всплывающее модальное окно с анимацией
- Название, описание и иконка ачивки
- Кнопки "Понял" и "Посмотреть все ачивки"

### 6.2 Страница достижений
- Сетка/список всех ачивок
- Фильтрация по категориям
- Прогресс-бары для нереализованных ачивок
- Сортировка (по времени получения, по категориям)

### 6.3 Индикаторы в UI
- Счетчик непросмотренных ачивок в главном меню
- Бейджи/значки рядом с типами упражнений с количеством ачивок
- Подсветка новых ачивок

## 7. Аналитика и метрики

### 7.1 Отслеживаемые метрики
- Количество полученных ачивок на пользователя
- Время между получением ачивок
- Самые сложные/легкие ачивки
- Влияние ачивок на время сессий

### 7.2 A/B тестирование (опционально)
- Тестирование разных типов уведомлений
- Влияние системы ачивок на удержание пользователей

## 8. Будущие улучшения (V2)

### 8.1 Социальные функции
- Доска лидеров в классе/школе
- Совместные ачивки
- Сравнение с друзьями

### 8.2 Сезонные события
- Временные ачивки к праздникам
- Тематические награды
- Квесты и испытания

### 8.3 Персонализация
- Адаптивная сложность условий
- Персональные рекомендации
- Настраиваемые цели

## 9. Критерии успеха

- Увеличение среднего времени сессии на 20%
- Повышение количества решенных примеров на 30%
- 80% пользователей получают хотя бы 5 ачивок в первую неделю
- Положительные отзывы от пользователей

## 10. Риски и ограничения

### 10.1 Технические риски
- Производительность при частой проверке условий
- Размер хранимых данных в localStorage

### 10.2 Пользовательские риски
- Слишком сложные условия могут демотивировать
- Баланс между сложностью и доступностью

### 10.3 Ограничения
- Нет серверной части для синхронизации между устройствами
- Ограничения локального хранилища